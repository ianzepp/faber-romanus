# Zig Statement Generator - Output Statements
#
# Generates Zig debug print statements.
#
# TRANSFORMS:
#   scribe(x, y) -> std.debug.print("{any} {any}\n", .{ x, y });

ex "../../../ast/sententia" importa ScribeGradus
ex "../../../ast/expressia" importa Expressia
ex "../nucleus" importa ZigGenerator

# External declaration - implementation lives in index.fab
ex "../expressia/index" importa genExpressia

@ publica
functio genScribe(ScribeGradus gradus, lista<Expressia> argumenta, ZigGenerator g) -> textus {
    # Build format string and args
    varia formatParts = [] innatum lista<textus>
    varia args = [] innatum lista<textus>

    ex argumenta pro arg {
        formatParts.adde("{any}")
        args.adde(genExpressia(arg, g))
    }

    fixum format = formatParts.coniunge(" ")
    fixum argsStr = args.coniunge(", ")

    redde scriptum("§std.debug.print(\"§\\n\", .{ § });", g.ind(), format, argsStr)
}
