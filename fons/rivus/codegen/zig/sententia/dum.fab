# Zig Statement Generator - While Loops
#
# TRANSFORMS:
#   dum cond { } -> while (cond) { }

ex "../../../ast/sententia" importa Sententia
ex "../../../ast/expressia" importa Expressia
ex "../nucleus" importa ZigGenerator

# External declarations - implementations live in index.fab
@ externa
functio genExpressia(Expressia expr, ZigGenerator g) -> textus

@ externa
functio genSententia(Sententia stmt, ZigGenerator g) -> textus

@ publica
functio genDum(Expressia condicio, Sententia corpus, ZigGenerator g) -> textus {
    g.intraProfundum()
    fixum body = genSententia(corpus, g)
    g.exiProfundum()

    redde scriptum("§while (§) {\n§\n§}", g.ind(), genExpressia(condicio, g), body, g.ind())
}
