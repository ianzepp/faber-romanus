# Comment preservation through parse -> codegen pipeline
#
# Comments are attached to AST nodes during parsing and emitted during codegen.
# - Leading comments appear before the statement
# - Trailing comments appear on the same line after the statement
#
# Faber uses # for all comments. Target syntax:
#   ts/rs/cpp/zig: //
#   py: #
#   fab: #

# =============================================================================
# Leading Line Comments
# =============================================================================

# Single leading comment
- name: leading line comment
  source: |
      # This is a comment
      fixum x = 5
  expect:
      ts:
          - '// This is a comment'
          - 'const x = 5'
      py:
          - '# This is a comment'
          - 'x = 5'
      rs:
          - '// This is a comment'
          - 'let x = 5'
      cpp:
          - '// This is a comment'
          - 'const auto x = 5'
      zig:
          - '// This is a comment'
          - 'const x = 5'
      fab:
          - '# This is a comment'
          - 'fixum x = 5'

# Multiple leading comments
- name: multiple leading comments
  source: |
      # First comment
      # Second comment
      fixum y = 10
  expect:
      ts:
          - '// First comment'
          - '// Second comment'
          - 'const y = 10'
      py:
          - '# First comment'
          - '# Second comment'
          - 'y = 10'
      fab:
          - '# First comment'
          - '# Second comment'
          - 'fixum y = 10'

# =============================================================================
# Trailing Comments
# =============================================================================

# Trailing comment on same line
- name: trailing line comment
  source: 'fixum z = 42  # magic number'
  expect:
      ts:
          - 'const z = 42; // magic number'
      py:
          - 'z = 42 # magic number'
      rs:
          - 'let z = 42; // magic number'
      cpp:
          - 'const auto z = 42; // magic number'
      zig:
          - 'const z = 42; // magic number'
      fab:
          - 'fixum z = 42 # magic number'

# =============================================================================
# Multi-line Comments
# =============================================================================

# Multiple comment lines
- name: multi-line comment
  source: |
      # This is line one
      # This is line two
      fixum a = 1
  expect:
      ts:
          - '// This is line one'
          - '// This is line two'
          - 'const a = 1'
      py:
          - '# This is line one'
          - '# This is line two'
          - 'a = 1'
      rs:
          - '// This is line one'
          - '// This is line two'
      cpp:
          - '// This is line one'
          - '// This is line two'
      zig:
          - '// This is line one'
          - '// This is line two'
      fab:
          - '# This is line one'
          - '# This is line two'
          - 'fixum a = 1'

# =============================================================================
# Comments on Functions
# =============================================================================

# Comment before function
- name: comment on function
  source: |
      # Greets the user
      functio greet() {
          scribe "Hello"
      }
  expect:
      ts:
          contains:
              - '// Greets the user'
              - 'function greet()'
      py:
          contains:
              - '# Greets the user'
              - 'def greet():'
      fab:
          - '# Greets the user'
          - 'functio greet()'

# =============================================================================
# Comments in Control Structures
# =============================================================================

# Comment before if statement
- name: comment before if
  source: |
      # Check condition
      si verum {
          scribe "yes"
      }
  expect:
      ts:
          - '// Check condition'
          - 'if (true)'
      py:
          - '# Check condition'
          - 'if True:'
      fab:
          - '# Check condition'
          - 'si verum'
