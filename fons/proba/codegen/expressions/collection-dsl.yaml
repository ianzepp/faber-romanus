# Collection DSL expressions - prima, ultima, summa transforms
# Maps Faber DSL syntax to target-language collection operations
#
# Note: ts uses exact match; py not yet implemented for collection-dsl
# Note: Collection DSL is only implemented in TypeScript target currently

- name: prima as expression
  source: fixum top = ex items prima 5
  expect:
      ts: 'const top = items.slice(0, 5);'
      fab:
          - 'fixum top = ex items prima 5'
  skip: [py, rs, cpp, zig]

- name: ultima as expression
  source: fixum last = ex items ultima 3
  expect:
      ts: 'const last = items.slice(-3);'
      fab:
          - 'fixum last = ex items ultima 3'
  skip: [py, rs, cpp, zig]

- name: summa reduction
  source: fixum total = ex nums summa
  expect:
      ts: 'const total = nums.reduce((a, b) => a + b, 0);'
      fab:
          - 'fixum total = ex nums summa'
  skip: [py, rs, cpp, zig]

- name: chained transforms prima then ultima
  source: fixum result = ex items prima 10, ultima 3
  expect:
      ts: 'const result = items.slice(0, 10).slice(-3);'
      fab:
          - 'fixum result = ex items prima 10'
          - 'ultima 3'
  skip: [py, rs, cpp, zig]

- name: chained transforms ultima then prima
  source: fixum result = ex items ultima 5, prima 2
  expect:
      ts: 'const result = items.slice(-5).slice(0, 2);'
      fab:
          - 'fixum result = ex items ultima 5'
          - 'prima 2'
  skip: [py, rs, cpp, zig]
