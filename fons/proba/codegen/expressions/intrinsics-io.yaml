# I/O Intrinsics - _scribe, _vide, _mone, _lege
# These are the function-call forms of console output and input
#
# Note: scribe/vide/mone (statement forms) are tested in statements/scribe.yaml
# This file tests the _prefixed intrinsic function calls.
#
# rivus: false - rivus doesn't implement intrinsic functions, only statement forms

# =============================================================================
# _scribe - Standard output (console.log equivalent)
# =============================================================================

- name: _scribe with single string
  rivus: false
  source: '_scribe("hello")'
  expect:
      ts:
          - 'console.log("hello");'
      py:
          - 'print("hello")'
      rs:
          - 'println!("{}"'
          - '"hello"'
      cpp:
          - 'std::println("{}"'
      zig:
          - 'std.debug.print'
          - '"hello"'
      fab:
          - '_scribe("hello")'

- name: _scribe with variable
  rivus: false
  source: '_scribe(x)'
  expect:
      ts:
          - 'console.log(x);'
      py:
          - 'print(x)'
      rs:
          - 'println!("{}", x);'
      cpp:
          - 'std::println("{}", x);'
      zig:
          - 'std.debug.print'
          - '.{x}'
      fab:
          - '_scribe(x)'

- name: _scribe with multiple args
  rivus: false
  source: '_scribe("a", "b", "c")'
  expect:
      ts:
          - 'console.log("a", "b", "c");'
      py:
          - 'print("a", "b", "c")'
      rs:
          - 'println!("{} {} {}"'
      cpp:
          - 'std::println("{} {} {}"'
      zig:
          - 'std.debug.print'
          - '{s} {s} {s}'
      fab:
          - '_scribe("a", "b", "c")'

# =============================================================================
# _vide - Debug output (console.debug equivalent)
# =============================================================================

- name: _vide with string
  rivus: false
  source: '_vide("debug")'
  expect:
      ts:
          - 'console.debug("debug");'
      py:
          - 'import sys'
          - 'print("debug", file=sys.stderr)'
      rs:
          - 'eprintln!("[DEBUG]'
      cpp:
          - 'std::cerr'
          - '[DEBUG]'
      zig:
          - 'std.debug.print'
          - '[DEBUG]'
      fab:
          - '_vide("debug")'

- name: _vide with variable
  rivus: false
  source: '_vide(val)'
  expect:
      ts:
          - 'console.debug(val);'
      py:
          - 'import sys'
          - 'print(val, file=sys.stderr)'
      rs:
          - 'eprintln!("[DEBUG]'
          - 'val'
      cpp:
          - 'std::cerr'
          - '[DEBUG]'
          - 'val'
      zig:
          - 'std.debug.print'
          - '[DEBUG]'
      fab:
          - '_vide(val)'

# =============================================================================
# _mone - Warning output (console.warn equivalent)
# =============================================================================

- name: _mone with string
  rivus: false
  source: '_mone("warning!")'
  expect:
      ts:
          - 'console.warn("warning!");'
      py:
          - 'import warnings'
          - 'warnings.warn("warning!")'
      rs:
          - 'eprintln!("[WARN]'
      cpp:
          - 'std::cerr'
          - '[WARN]'
      zig:
          - 'std.debug.print'
          - '[WARN]'
      fab:
          - '_mone("warning!")'

- name: _mone with variable
  rivus: false
  source: '_mone(msg)'
  expect:
      ts:
          - 'console.warn(msg);'
      py:
          - 'import warnings'
          - 'warnings.warn(msg)'
      rs:
          - 'eprintln!("[WARN]'
          - 'msg'
      cpp:
          - 'std::cerr'
          - '[WARN]'
          - 'msg'
      zig:
          - 'std.debug.print'
          - '[WARN]'
      fab:
          - '_mone(msg)'

# =============================================================================
# _lege - Read input (prompt/input equivalent)
# =============================================================================

- name: _lege basic
  rivus: false
  source: 'fixum input = _lege()'
  expect:
      ts:
          - 'const input = prompt() ?? "";'
      py:
          - 'input = input()'
      rs:
          - 'let input ='
          - 'std::io::stdin().read_line'
      cpp:
          - 'const auto input'
          - 'std::getline(std::cin'
      zig:
          - 'std.io.getStdIn()'
      fab:
          - 'fixum input = _lege()'

# =============================================================================
# Expression context - I/O intrinsics as expressions
# =============================================================================

- name: _lege in function call
  rivus: false
  source: 'process(_lege())'
  expect:
      ts:
          - 'process(prompt() ?? "");'
      py:
          - 'process(input())'
      rs:
          - 'process('
          - 'std::io::stdin()'
      cpp:
          - 'process('
          - 'std::getline'
      zig:
          - 'process('
          - 'std.io.getStdIn()'
      fab:
          - 'process(_lege())'
