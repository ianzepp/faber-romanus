# Lege expression - read stdin
# Maps Faber lege/lege lineam to target-language stdin reading

- name: lege basic (read all)
  source: 'lege'
  wrap: 'cura arena fit alloc { $ }'
  expect:
      ts:
          - 'await Bun.stdin.text()'
      zig:
          - 'stdin.readAllAlloc(alloc, 10 * 1024 * 1024) catch ""'
      fab:
          - 'lege'
  skip: [py, rs, cpp]

- name: lege assigned to variable
  source: 'fixum source = lege'
  wrap: 'cura arena fit alloc { $ }'
  expect:
      ts:
          - 'const source = await Bun.stdin.text()'
      zig:
          - 'const source = stdin.readAllAlloc(alloc, 10 * 1024 * 1024) catch ""'
      fab:
          - 'fixum source = lege'
  skip: [py, rs, cpp]

- name: lege lineam (read one line)
  source: 'lege lineam'
  wrap: 'cura arena fit alloc { $ }'
  expect:
      ts:
          - 'createInterface'
          - 'process.stdin'
      zig:
          - 'stdin.readUntilDelimiterAlloc(alloc'
          - "'\\n'"
      fab:
          - 'lege lineam'
  skip: [py, rs, cpp]

- name: lege lineam assigned to variable
  source: 'fixum line = lege lineam'
  wrap: 'cura arena fit alloc { $ }'
  expect:
      ts:
          - 'const line ='
          - 'createInterface'
      zig:
          - 'const line = (stdin.readUntilDelimiterAlloc(alloc'
      fab:
          - 'fixum line = lege lineam'
  skip: [py, rs, cpp]
