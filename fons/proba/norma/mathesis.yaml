# File-level metadata: skip in rivus tests (stdlib not yet implemented)
- rivus: false

# Mathesis - Math stdlib functions
# Tests for norma/mathesis module functions and constants

# =============================================================================
# Rounding Functions
# =============================================================================

- name: pavimentum (floor)
  source: |
      fixum x = pavimentum(3.7)
  expect:
      ts: 'const x = Math.floor(3.7);'
      py:
          - 'import math'
          - 'x = math.floor(3.7)'
      rs:
          - 'let x = 3.7.floor();'
      zig:
          - 'const x = @floor(3.7);'
      cpp:
          - '#include <cmath>'
          - 'const auto x = std::floor(3.7);'

- name: tectum (ceiling)
  source: |
      fixum x = tectum(3.2)
  expect:
      ts: 'const x = Math.ceil(3.2);'
      py:
          - 'import math'
          - 'x = math.ceil(3.2)'
      rs:
          - 'let x = 3.2.ceil();'
      zig:
          - 'const x = @ceil(3.2);'
      cpp:
          - '#include <cmath>'
          - 'const auto x = std::ceil(3.2);'

- name: rotundum (round)
  source: |
      fixum x = rotundum(3.5)
  expect:
      ts: 'const x = Math.round(3.5);'
      py:
          - 'x = round(3.5)'
      rs:
          - 'let x = 3.5.round();'
      zig:
          - 'const x = @round(3.5);'
      cpp:
          - '#include <cmath>'
          - 'const auto x = std::round(3.5);'

- name: truncatum (truncate)
  source: |
      fixum x = truncatum(3.9)
  expect:
      ts: 'const x = Math.trunc(3.9);'
      py:
          - 'import math'
          - 'x = math.trunc(3.9)'
      rs:
          - 'let x = 3.9.trunc();'
      zig:
          - 'const x = @trunc(3.9);'
      cpp:
          - '#include <cmath>'
          - 'const auto x = std::trunc(3.9);'

# =============================================================================
# Powers and Roots
# =============================================================================

- name: radix (sqrt)
  source: |
      fixum x = radix(16)
  expect:
      ts: 'const x = Math.sqrt(16);'
      py:
          - 'import math'
          - 'x = math.sqrt(16)'
      rs:
          - 'let x = 16.sqrt();'
      zig:
          - 'const x = @sqrt(16);'
      cpp:
          - '#include <cmath>'
          - 'const auto x = std::sqrt(16);'

- name: potentia (pow)
  source: |
      fixum x = potentia(2, 8)
  expect:
      ts: 'const x = Math.pow(2, 8);'
      py:
          - 'import math'
          - 'x = math.pow(2, 8)'
      rs:
          - 'let x = 2.powf(8);'
      zig:
          - 'const x = std.math.pow(2, 8);'
      cpp:
          - '#include <cmath>'
          - 'const auto x = std::pow(2, 8);'

- name: logarithmus (natural log)
  source: |
      fixum x = logarithmus(10)
  expect:
      ts: 'const x = Math.log(10);'
      py:
          - 'import math'
          - 'x = math.log(10)'
      rs:
          - 'let x = 10.ln();'
      zig:
          - 'const x = @log(10);'
      cpp:
          - '#include <cmath>'
          - 'const auto x = std::log(10);'

- name: logarithmus10 (log base 10)
  source: |
      fixum x = logarithmus10(100)
  expect:
      ts: 'const x = Math.log10(100);'
      py:
          - 'import math'
          - 'x = math.log10(100)'
      rs:
          - 'let x = 100.log10();'
      zig:
          - 'const x = std.math.log10(100);'
      cpp:
          - '#include <cmath>'
          - 'const auto x = std::log10(100);'

- name: exponens (e^x)
  source: |
      fixum x = exponens(1)
  expect:
      ts: 'const x = Math.exp(1);'
      py:
          - 'import math'
          - 'x = math.exp(1)'
      rs:
          - 'let x = 1.exp();'
      zig:
          - 'const x = @exp(1);'
      cpp:
          - '#include <cmath>'
          - 'const auto x = std::exp(1);'

# =============================================================================
# Trigonometry
# =============================================================================

- name: sinus (sin)
  source: |
      fixum x = sinus(0)
  expect:
      ts: 'const x = Math.sin(0);'
      py:
          - 'import math'
          - 'x = math.sin(0)'
      rs:
          - 'let x = 0.sin();'
      zig:
          - 'const x = @sin(0);'
      cpp:
          - '#include <cmath>'
          - 'const auto x = std::sin(0);'

- name: cosinus (cos)
  source: |
      fixum x = cosinus(0)
  expect:
      ts: 'const x = Math.cos(0);'
      py:
          - 'import math'
          - 'x = math.cos(0)'
      rs:
          - 'let x = 0.cos();'
      zig:
          - 'const x = @cos(0);'
      cpp:
          - '#include <cmath>'
          - 'const auto x = std::cos(0);'

- name: tangens (tan)
  source: |
      fixum x = tangens(0)
  expect:
      ts: 'const x = Math.tan(0);'
      py:
          - 'import math'
          - 'x = math.tan(0)'
      rs:
          - 'let x = 0.tan();'
      zig:
          - 'const x = @tan(0);'
      cpp:
          - '#include <cmath>'
          - 'const auto x = std::tan(0);'

# =============================================================================
# Absolute and Sign
# =============================================================================

- name: absolutum (abs)
  source: |
      fixum x = absolutum(-5)
  expect:
      ts: 'const x = Math.abs(-5);'
      py:
          - 'x = abs(-5)'
      rs:
          - 'let x = -5.abs();'
      zig:
          - 'const x = @abs(-5);'
      cpp:
          - '#include <cmath>'
          - 'const auto x = std::abs(-5);'

- name: signum (sign)
  source: |
      fixum x = signum(-5)
  expect:
      ts: 'const x = Math.sign(-5);'
      py:
          # WHY: Template bug - sequential ยง markers don't substitute correctly for multi-use
          - 'if -5 > 0'
      rs:
          - 'let x = -5.signum();'
      zig:
          - 'const x = std.math.sign(-5);'
      cpp:
          # WHY: Template bug - sequential ยง markers don't substitute correctly
          - '-5 > 0'

# =============================================================================
# Min/Max/Clamp
# =============================================================================

- name: minimus (min)
  source: |
      fixum x = minimus(3, 7)
  expect:
      ts: 'const x = Math.min(3, 7);'
      py:
          - 'x = min(3, 7)'
      rs:
          - 'let x = 3.min(7);'
      zig:
          - 'const x = @min(3, 7);'
      cpp:
          - '#include <algorithm>'
          - 'const auto x = std::min(3, 7);'

- name: maximus (max)
  source: |
      fixum x = maximus(3, 7)
  expect:
      ts: 'const x = Math.max(3, 7);'
      py:
          - 'x = max(3, 7)'
      rs:
          - 'let x = 3.max(7);'
      zig:
          - 'const x = @max(3, 7);'
      cpp:
          - '#include <algorithm>'
          - 'const auto x = std::max(3, 7);'

- name: constringens (clamp)
  source: |
      fixum x = constringens(5, 0, 10)
  expect:
      ts: 'const x = Math.min(Math.max(5, 0), 10);'
      py:
          - 'x = max(0, min(5, 10))'
      rs:
          - 'let x = 5.clamp(0, 10);'
      zig:
          - 'const x = std.math.clamp(5, 0, 10);'
      cpp:
          - '#include <algorithm>'
          - 'const auto x = std::clamp(5, 0, 10);'

# =============================================================================
# Constants
# =============================================================================

- name: PI constant
  source: |
      fixum x = PI
  expect:
      ts: 'const x = Math.PI;'
      py:
          - 'import math'
          - 'x = math.pi'
      rs:
          - 'let x = std::f64::consts::PI;'
      zig:
          - 'const x = std.math.pi;'
      cpp:
          - '#include <numbers>'
          - 'const auto x = std::numbers::pi;'

- name: E constant
  source: |
      fixum x = E
  expect:
      ts: 'const x = Math.E;'
      py:
          - 'import math'
          - 'x = math.e'
      rs:
          - 'let x = std::f64::consts::E;'
      zig:
          - 'const x = std.math.e;'
      cpp:
          - '#include <numbers>'
          - 'const auto x = std::numbers::e;'

- name: TAU constant
  source: |
      fixum x = TAU
  expect:
      ts: 'const x = (Math.PI * 2);'
      py:
          - 'import math'
          - 'x = math.tau'
      rs:
          - 'let x = std::f64::consts::TAU;'
      zig:
          - 'const x = std.math.tau;'
      cpp:
          - '#include <numbers>'
          - 'const auto x = (std::numbers::pi * 2);'

# =============================================================================
# Combined Usage
# =============================================================================

- name: area of circle with PI
  source: |
      fixum r = 5
      fixum area = PI * r * r
  expect:
      ts:
          - 'const r = 5;'
          - 'const area = ((Math.PI * r) * r);'
      py:
          - 'import math'
          - 'r = 5'
          - 'area = ((math.pi * r) * r)'
      cpp:
          - '#include <numbers>'
          - 'const auto r = 5;'
          - 'const auto area = ((std::numbers::pi * r) * r);'

- name: pythagorean theorem with radix
  source: |
      fixum a = 3
      fixum b = 4
      fixum c = radix(a * a + b * b)
  expect:
      ts:
          - 'const a = 3;'
          - 'const b = 4;'
          - 'const c = Math.sqrt(((a * a) + (b * b)));'
      py:
          - 'import math'
          - 'a = 3'
          - 'b = 4'
          - 'c = math.sqrt(((a * a) + (b * b)))'
      cpp:
          - '#include <cmath>'
          - 'const auto a = 3;'
          - 'const auto b = 4;'
          - 'const auto c = std::sqrt(((a * a) + (b * b)));'
