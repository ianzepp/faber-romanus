# Importa - Import declaration codegen tests
# Covers: ex...importa, wildcard imports, norma intrinsics

# =============================================================================
# External Package Imports
# =============================================================================

# External package imports pass through unchanged
- name: external package import
  input: 'ex "@hono/hono" importa Hono, Context'
  ts: 'import { Hono, Context } from "@hono/hono";'
  py: 'from @hono/hono import Hono, Context'

# Wildcard import
- name: wildcard import
  input: 'ex "@lodash/lodash" importa *'
  ts:
      - 'import * as'
      - '@lodash/lodash'

# =============================================================================
# Norma Intrinsics (TS-specific)
# =============================================================================
# These tests use not_contains to verify norma imports are suppressed

# norma imports don't emit import statements - they're handled as intrinsics
- name: norma imports are suppressed
  input: 'ex "norma/tempus" importa nunc'
  ts:
      not_contains:
          - 'import'

# nunc() becomes Date.now() in TS
- name: nunc compiles to Date.now
  input: |
      ex "norma/tempus" importa nunc
      fixum now = nunc()
  ts:
      contains:
          - 'const now = Date.now()'
      not_contains:
          - 'import'

# SECUNDUM is a duration constant (1000ms)
- name: SECUNDUM compiles to literal
  input: |
      ex "norma/tempus" importa SECUNDUM
      fixum sec = SECUNDUM
  ts:
      contains:
          - 'const sec = 1000'
      not_contains:
          - 'import'

# dormi() becomes Promise with setTimeout
- name: dormi compiles to Promise setTimeout
  input: |
      ex "norma/tempus" importa dormi, SECUNDUM
      futura functio wait() {
        cede dormi(5 * SECUNDUM)
      }
  ts:
      contains:
          - 'await new Promise(r => setTimeout(r, (5 * 1000)))'
      not_contains:
          - 'import'

# All duration constants compile to millisecond literals
- name: duration constants compile to literals
  input: |
      ex "norma/tempus" importa MILLISECUNDUM, SECUNDUM, MINUTUM, HORA, DIES
      fixum a = MILLISECUNDUM
      fixum b = SECUNDUM
      fixum c = MINUTUM
      fixum d = HORA
      fixum e = DIES
  ts:
      contains:
          - 'const a = 1'
          - 'const b = 1000'
          - 'const c = 60000'
          - 'const d = 3600000'
          - 'const e = 86400000'
      not_contains:
          - 'import'
