# Collection DSL expressions - prima, ultima, summa transforms
# Maps Faber DSL syntax to target-language collection operations
#
# Note: ts uses exact match; py not yet implemented for collection-dsl
# Note: Collection DSL is only implemented in TypeScript target currently

- name: prima as expression
  faber: fixum top = ex items prima 5
  expect:
      ts: 'const top = items.slice(0, 5);'
  skip: [py, rs, cpp, zig]

- name: ultima as expression
  faber: fixum last = ex items ultima 3
  expect:
      ts: 'const last = items.slice(-3);'
  skip: [py, rs, cpp, zig]

- name: summa reduction
  faber: fixum total = ex nums summa
  expect:
      ts: 'const total = nums.reduce((a, b) => a + b, 0);'
  skip: [py, rs, cpp, zig]

- name: chained transforms prima then ultima
  faber: fixum result = ex items prima 10, ultima 3
  expect:
      ts: 'const result = items.slice(0, 10).slice(-3);'
  skip: [py, rs, cpp, zig]

- name: chained transforms ultima then prima
  faber: fixum result = ex items ultima 5, prima 2
  expect:
      ts: 'const result = items.slice(-5).slice(0, 2);'
  skip: [py, rs, cpp, zig]
