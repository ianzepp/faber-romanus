# Fundamenta - C++ codegen specifics
# Covers: scribe output, includes, main function wrapping
# Note: Variable declarations and literals now in proba/codegen/statements/ and expressions/

# =============================================================================
# Scribe Output
# =============================================================================

# scribe is the print statement (console.log in TS, print in Python)
- name: 'scribe single arg'
  input: 'scribe x'
  ts: 'console.log(x);'
  py: 'print(x)'
  cpp:
      - 'std::print'
  skip: [rs]
  fab: 'scribe x'

# Multiple arguments are comma-separated
- name: 'scribe multiple args'
  input: 'scribe "a", "b", "c"'
  ts: 'console.log("a", "b", "c");'
  py: 'print("a", "b", "c")'
  cpp:
      - 'std::print("{} {} {}\n"'
  zig:
      - 'stdout.print("{s} {s} {s}\n", .{ "a", "b", "c" }) catch {};'
  rs:
      - 'println!'
  fab:
      - 'scribe "a", "b", "c"'

# Expressions are evaluated before printing
- name: 'scribe with expression'
  input: 'scribe x + y'
  ts:
      - 'console.log'
      - 'x + y'
  py:
      - 'print'
      - 'x + y'
  cpp:
      - 'std::print("{}\n", (x + y));'
  skip: [rs]
  fab:
      - 'scribe x + y'

# =============================================================================
# Includes (C++)
# =============================================================================

# scribe generates required includes for print and string
- name: 'cpp generates required includes'
  input: 'scribe "hello"'
  cpp:
      - '#include <print>'
      - '#include <string>'
  rs:
      - 'println!'
  fab: 'scribe "hello"'

# adfirma adds cassert include
- name: 'cpp optional includes added when used'
  input: 'adfirma verum'
  cpp:
      - '#include <cassert>'
  rs:
      - 'assert!(true);'
  fab: 'adfirma verum'

# =============================================================================
# Entry Point (incipit)
# =============================================================================

# incipit generates target-appropriate main function
- name: 'incipit generates main function'
  input: |
      incipit {
        scribe "hello"
      }
  ts:
      - 'console.log("hello")'
  py:
      - 'if __name__ == "__main__":'
      - 'print("hello")'
  cpp:
      - 'int main() {'
      - 'std::print'
      - 'return 0;'
  rs:
      - 'fn main() {'
      - 'println!'
  zig:
      - 'pub fn main() void {'
      - 'stdout.print'
  fab:
      - 'incipit {'
      - 'scribe "hello"'

# Declarations outside incipit, call inside
- name: 'declarations outside incipit'
  input: |
      functio greet() {
        scribe "hi"
      }
      incipit {
        greet()
      }
  ts:
      - 'function greet()'
      - 'console.log("hi")'
      - 'greet();'
  py:
      - 'def greet():'
      - 'print("hi")'
      - 'if __name__ == "__main__":'
      - 'greet()'
  cpp:
      - 'void greet() {'
      - 'int main() {'
      - 'greet();'
  rs:
      - 'fn greet() {'
      - 'fn main() {'
      - 'greet();'
  zig:
      - 'fn greet() void {'
      - 'pub fn main() void {'
      - 'greet();'
  fab:
      - 'functio greet() {'
      - 'scribe "hi"'
      - 'incipit {'
      - 'greet()'
