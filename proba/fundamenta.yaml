# Fundamenta - C++ codegen specifics
# Covers: scribe output, includes, main function wrapping
# Note: Variable declarations and literals now in proba/codegen/statements/ and expressions/

# =============================================================================
# Scribe Output
# =============================================================================

# scribe is the print statement (console.log in TS, print in Python)
- name: 'scribe single arg'
  input: 'scribe x'
  ts: 'console.log(x);'
  py: 'print(x)'
  cpp:
      - 'std::print'
  skip: [rs]

# Multiple arguments are comma-separated
- name: 'scribe multiple args'
  input: 'scribe "a", "b", "c"'
  ts: 'console.log("a", "b", "c");'
  py: 'print("a", "b", "c")'
  cpp:
      - 'std::print("{} {} {}\n"'
  zig:
      - 'std.debug.print("{s} {s} {s}\n", .{ "a", "b", "c" });'
  rs:
      - 'println!'

# Expressions are evaluated before printing
- name: 'scribe with expression'
  input: 'scribe x + y'
  ts:
      - 'console.log'
      - 'x + y'
  py:
      - 'print'
      - 'x + y'
  cpp:
      - 'std::print("{}\n", (x + y));'
  skip: [rs]

# =============================================================================
# Includes (C++)
# =============================================================================

# scribe generates required includes for print and string
- name: 'cpp generates required includes'
  input: 'scribe "hello"'
  cpp:
      - '#include <print>'
      - '#include <string>'
  rs:
      - 'println!'

# adfirma adds cassert include
- name: 'cpp optional includes added when used'
  input: 'adfirma verum'
  cpp:
      - '#include <cassert>'
  rs:
      - 'assert!(true);'

# =============================================================================
# Main Function (C++)
# =============================================================================

# Runtime code is wrapped in main function
- name: 'cpp runtime code wrapped in main'
  input: 'scribe "hello"'
  cpp:
      - 'int main() {'
      - 'return 0;'
  rs:
      - 'println!'

# Declarations appear outside main, before it
- name: 'cpp declarations outside main'
  input: |
      functio greet() {
        scribe "hi"
      }
      greet()
  cpp:
      - 'void greet()'
      - 'int main() {'
  rs:
      - 'fn greet()'
      - 'greet();'
